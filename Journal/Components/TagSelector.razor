@using Journal.Models

<label>Tags</label>
<input class="form-control"
       placeholder="Add tag and press Enter"
       @bind="NewTag"
       @bind:event="oninput"
       @onkeydown="HandleKeyDown" />

<button class="btn btn-secondary btn-sm mt-2" @onclick="AddTag">
    ➕ Add Tag
</button>

@if (Tags.Any())
{
    <div class="mt-3">
        <strong>Tags:</strong>
        <ul class="list-unstyled">
            @foreach (var tag in Tags)
            {
                <li class="d-inline-block me-2">
                    <span class="badge bg-info">🏷️ @tag. Name</span>
                </li>
            }
        </ul>
    </div>
}

@code {
    private string NewTag = string.Empty;

    [Parameter]
    public List<Tag> Tags { get; set; } = new();

    private void AddTag()
    {
        if (!string.IsNullOrWhiteSpace(NewTag))
        {
            Tags.Add(new Tag { Name = NewTag.Trim() });
            NewTag = string.Empty;
            StateHasChanged();
        }
    }

    private void HandleKeyDown(KeyboardEventArgs e)
    {
        if (e.Key == "Enter")
        {
            AddTag();
        }
    }
}